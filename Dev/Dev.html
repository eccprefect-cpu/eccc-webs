<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECCPMS Admin Application - Download & Access</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
       (function(){
          // ⚠️ අවධානයයි: මෙතැනට ඔබේ EmailJS Public Key එක දමන්න
          // උදාහරණ: emailjs.init("user_xxxxxxxxxxxx");
          emailjs.init("8u6HxjnObnXlrvHmx"); 
       })();
    </script>
    <style>
        :root {
            --color-primary: #800000;       /* Maroon */
            --color-primary-dark: #660000;  /* Darker Maroon */
            --color-accent: #E8D5A2;        /* A less bright Cream Yellow for accents */
            
            --color-background: #FDFCF9;    /* Off-white/light cream background */
            --color-light-bg: #FFFFFF;      /* White for cards */
            
            --color-dark: #212121;          /* Dark charcoal */
            --color-text-primary: #212121;  /* Dark charcoal for text */
            --color-text-secondary: #555555;/* Medium grey for text */
            --color-border: #E0E0E0;        /* Light grey for borders */
        }

        html { 
            scroll-behavior: smooth; 
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-background);
            color: var(--color-text-secondary);
            overflow-x: hidden;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Inter', sans-serif;
            font-weight: 800;
            color: var(--color-text-primary);
        }
        
        .header-glass {
            backdrop-filter: blur(12px) saturate(180%);
            background-color: rgba(253, 252, 249, 0.85); /* Semi-transparent light background */
            border-bottom: 1px solid var(--color-border);
        }

        .hero-gradient {
            background: radial-gradient(circle at 80% 20%, rgba(232, 213, 162, 0.4), transparent 50%),
                        radial-gradient(circle at 20% 80%, rgba(128, 0, 0, 0.1), transparent 50%),
                        var(--color-background);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 90vh;
        }

        .text-primary { color: var(--color-primary); }
        .bg-primary { background-color: var(--color-primary); }
        .hover\:bg-primary-dark:hover { background-color: var(--color-primary-dark); }
        .text-accent { color: var(--color-accent); }
        .bg-accent-light { background-color: rgba(128, 0, 0, 0.05); }
        
        .section-subtitle {
            letter-spacing: 0.1em;
            text-transform: uppercase;
            font-weight: 700;
        }
        .section-title {
            position: relative;
            display: inline-block;
            padding-bottom: 1rem;
            font-weight: 900;
        }
        .section-title::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: 0;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--color-primary);
            border-radius: 2px;
        }

        .feature-card {
            background-color: var(--color-light-bg);
            border: 1px solid var(--color-border);
            box-shadow: 0 4px 25px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
            will-change: transform;
        }
        .feature-card:hover {
            transform: translateY(-10px); 
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border-color: var(--color-primary);
        }

        /* Phone Mockup */
        .phone-mockup {
            max-width: 250px;
            width: 70%;
            margin: 0 auto;
            position: relative;
            perspective: 1000px;
        }

        .phone-mockup .phone-frame {
            background: #333; /* Dark grey frame for light theme */
            border-radius: 40px;
            padding: 12px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            transform: rotateY(-15deg) rotateX(5deg);
            transform-style: preserve-3d;
            transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            overflow: hidden;
        }
        .phone-mockup:hover .phone-frame {
            transform: rotateY(0) rotateX(0) scale(1.05);
            box-shadow: 0 30px 70px rgba(0,0,0,0.25);
        }
        .phone-mockup .phone-screen {
            background: #000;
            border-radius: 30px;
            overflow: hidden;
            transform: translateZ(0);
        }
        .phone-mockup .phone-screen img {
             transition: transform 0.5s ease;
        }
        .phone-mockup:hover .phone-screen img {
             transform: scale(1.05);
        }
        
        .btn-hover-effect {
            position: relative;
            overflow: hidden;
            z-index: 1;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .btn-hover-effect:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(128, 0, 0, 0.2);
        }

        .scroll-animate {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s cubic-bezier(0.165, 0.84, 0.44, 1), transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
        }
        .scroll-animate.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .social-icon {
            transition: all 0.3s ease;
        }
        .social-icon:hover {
            color: var(--color-primary) !important;
            transform: translateY(-4px) scale(1.1);
        }
        
        .faq-item .faq-question i { transition: transform 0.3s ease-in-out; }
        .faq-item .faq-question.active i { transform: rotate(180deg); }

        /* Full-screen nav animation */
        #nav-mobile-overlay.is-open {
            opacity: 1;
        }
        #nav-mobile-overlay.is-open #nav-mobile {
            transform: translateY(0);
        }

        /* Staggered animation for full-screen nav links */
        #nav-mobile .nav-link {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.3s ease-out, transform 0.3s ease-out;
        }

        #nav-mobile-overlay.is-open #nav-mobile .nav-link {
            opacity: 1;
            transform: translateY(0);
        }
        #nav-mobile-overlay.is-open #nav-mobile .nav-link:nth-child(1) { transition-delay: 0.2s; }
        #nav-mobile-overlay.is-open #nav-mobile .nav-link:nth-child(2) { transition-delay: 0.25s; }
        #nav-mobile-overlay.is-open #nav-mobile .nav-link:nth-child(3) { transition-delay: 0.3s; }
        #nav-mobile-overlay.is-open #nav-mobile .nav-link:nth-child(4) { transition-delay: 0.35s; }
        #nav-mobile-overlay.is-open #nav-mobile .nav-link:nth-child(5) { transition-delay: 0.4s; }
        #nav-mobile-overlay.is-open #nav-mobile .nav-link:nth-child(6) { transition-delay: 0.45s; }

    </style>
</head>
<body class="min-h-screen">

    <div id="preloader" class="fixed top-0 left-0 w-full h-full bg-background flex items-center justify-center z-[100]">
        <div class="w-20 h-20 border-4 border-dashed rounded-full animate-spin border-primary"></div>
    </div>

    <header id="header" class="w-full py-4 transition duration-300 header-glass sticky top-0 z-50">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <img src="images/school logo.png" alt="ECC Logo" class="rounded-full w-10 h-10 border-2 border-border">
                <h1 class="text-xl sm:text-2xl font-black tracking-tighter text-text-primary">ECCPMS DEV TEAM</h1>
            </div>

            <nav id="nav-main" class="hidden md:flex space-x-6 text-base font-medium items-center">
                <a href="#banner" class="text-primary hover:text-white transition duration-300">Home</a>
                <a href="#about" class="text-text-secondary hover:text-primary transition duration-300">Mission</a>
                <a href="#features" class="text-text-secondary hover:text-primary transition duration-300">Features</a>
                <a href="#download" class="text-text-secondary hover:text-primary transition duration-300">Download</a>
                <a href="#team" class="text-text-secondary hover:text-primary transition duration-300">Team</a>
                <a href="#register" class="text-primary border-2 border-primary py-2 px-5 rounded-full hover:bg-primary hover:text-white transition duration-300 font-semibold">ACCESS</a>
            </nav>

            <button id="nav-trigger" class="md:hidden text-text-primary text-3xl">
                <i class="fa-solid fa-bars"></i>
            </button>
        </div>
        
        <div id="nav-mobile-overlay" class="fixed inset-0 bg-black bg-opacity-70 z-50 hidden md:hidden transition-opacity duration-300 ease-in-out opacity-0">
            <div id="nav-mobile" class="absolute top-0 left-0 w-full h-full bg-background transform -translate-y-full transition-transform duration-400 ease-in-out overflow-y-auto">
                <div class="flex justify-end p-4">
                    <button id="nav-close" class="text-text-primary hover:text-primary text-3xl transition-colors">
                        <i class="fa-solid fa-xmark"></i>
                    </button>
                </div>
                <nav class="flex flex-col items-center justify-center h-[calc(100%-60px)] space-y-6 text-2xl font-bold">
                    <a href="#banner" class="nav-link text-primary hover:text-primary-dark transition duration-300"><i class="fa-solid fa-house mr-3"></i>Home</a>
                    <a href="#about" class="nav-link text-text-primary hover:text-primary transition duration-300"><i class="fa-solid fa-bullseye mr-3"></i>Mission</a>
                    <a href="#features" class="nav-link text-text-primary hover:text-primary transition duration-300"><i class="fa-solid fa-star mr-3"></i>Features</a>
                    <a href="#download" class="nav-link text-text-primary hover:text-primary transition duration-300"><i class="fa-solid fa-download mr-3"></i>Download</a>
                    <a href="#team" class="nav-link text-text-primary hover:text-primary transition duration-300"><i class="fa-solid fa-users mr-3"></i>Team</a>
                    <a href="#register" class="nav-link text-white bg-primary py-3 px-8 rounded-lg text-center mt-6 block btn-hover-effect">ACCESS</a>
                </nav>
            </div>
        </div>
    </header>

    <section id="banner" class="hero-gradient text-text-primary relative flex items-center justify-center">
        <div class="container mx-auto px-6 relative z-10 grid md:grid-cols-2 gap-12 items-center">
            <div class="text-center md:text-left animate__animated animate__fadeInLeft">
                <div class="flex justify-center md:justify-start items-center space-x-4 mb-4">
                     <img src="images/prefects guild logo.png" alt="Prefects Guild Logo" class="rounded-full shadow-lg w-12 h-12 object-cover">
                    <span class="text-lg font-semibold tracking-wider uppercase text-text-secondary">E.C.C. PREFECTS' GUILD</span>
                </div>
                
                <h1 class="text-5xl lg:text-7xl font-black mb-3 tracking-tighter">
                    DIGITAL PREFECT
                </h1>
                <h2 class="text-4xl lg:text-5xl font-extrabold mb-6 text-primary drop-shadow-lg">
                    Management System
                </h2>
                
                <p class="text-lg mb-8 max-w-lg mx-auto md:mx-0 font-normal text-text-secondary">
                    
                </p>

                <div>
                    <button onclick="openDownloadModal()" class="inline-flex items-center bg-primary text-white font-bold py-4 px-10 rounded-lg shadow-lg text-lg mt-4 transition duration-300 hover:bg-primary-dark btn-hover-effect cursor-pointer">
                        <i class="fa-solid fa-download mr-3"></i>
                        Get The App
                    </button>
                </div>
            </div>

            <div class="flex justify-center md:justify-end animate__animated animate__fadeInRight">
                <div class="phone-mockup">
                    <div class="phone-frame">
                        <div class="phone-screen">
                            <img src="images/p.png" alt="ECCPMS Dashboard Preview" class="w-full h-full object-cover">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <main id="content">

        <section id="about" class="py-24 bg-background">
            <div class="container mx-auto px-6">
                <div class="grid md:grid-cols-2 gap-16 items-center">
                    <div class="scroll-animate">
                        <p class="section-subtitle text-primary mb-2">OUR CORE BELIEFS</p>
                        <h2 class="text-4xl font-extrabold text-text-primary mb-6">Revolutionizing Prefect Management</h2>
                        <p class="text-text-secondary text-lg leading-relaxed mb-8">
                            Our mission is to empower student leaders with an intuitive, powerful digital platform. We aim to streamline daily operations, enhance event coordination, and foster seamless communication within the prefect body.
                        </p>
                        <a href="#features" class="font-bold text-primary hover:text-primary-dark transition">Learn more about our features <i class="fa-solid fa-arrow-right ml-1"></i></a>
                    </div>
                    <div class="grid grid-cols-1 gap-8">
                        <div class="p-6 rounded-lg feature-card flex items-start scroll-animate" style="transition-delay: 100ms;">
                            <i class="fa-solid fa-shield-halved text-4xl text-primary mt-1 mr-5"></i>
                            <div>
                                <h4 class="text-xl font-bold text-text-primary mb-1">Integrity</h4>
                                <p class="text-base text-text-secondary">Upholding the highest standards of honesty and ethical conduct in all operations.</p>
                            </div>
                        </div>
                        <div class="p-6 rounded-lg feature-card flex items-start scroll-animate" style="transition-delay: 200ms;">
                            <i class="fa-solid fa-bolt-lightning text-4xl text-primary mt-1 mr-5"></i>
                            <div>
                                <h4 class="text-xl font-bold text-text-primary mb-1">Efficiency</h4>
                                <p class="text-base text-text-secondary">Simplifying complex tasks through fast, reliable, and user-friendly technology.</p>
                            </div>
                        </div>
                        <div class="p-6 rounded-lg feature-card flex items-start scroll-animate" style="transition-delay: 300ms;">
                            <i class="fa-solid fa-users text-4xl text-primary mt-1 mr-5"></i>
                            <div>
                                <h4 class="text-xl font-bold text-text-primary mb-1">Community</h4>
                                <p class="text-base text-text-secondary">Fostering better communication, collaboration, and unity among the prefect body.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="features" class="py-24 bg-light-bg">
            <div class="container mx-auto px-6">
                <p class="section-subtitle text-primary mb-2 text-center scroll-animate">APP FEATURES</p>
                <h2 class="section-title text-4xl font-extrabold text-text-primary mb-16 text-center mx-auto scroll-animate">A Powerful Tool for School Leaders</h2>

                <div class="grid lg:grid-cols-2 gap-12 items-center mb-20">
                    <div class="scroll-animate">
                        <h3 class="text-3xl font-bold text-text-primary mb-4">Comprehensive Dashboard</h3>
                        <p class="text-text-secondary text-lg leading-relaxed mb-6">Get a bird's-eye view of your guild's activities. The dashboard provides at-a-glance information on prefect attendance, quick access to essential actions like scanning QR codes, and a summary of recent arrivals.</p>
                        <ul class="space-y-3">
                            <li class="flex items-center text-text-secondary"><i class="fa-solid fa-check-circle text-accent mr-3"></i>Live Attendance Statistics</li>
                            <li class="flex items-center text-text-secondary"><i class="fa-solid fa-check-circle text-accent mr-3"></i>Quick Scan Action Button</li>
                            <li class="flex items-center text-text-secondary"><i class="fa-solid fa-check-circle text-accent mr-3"></i>Recent Arrival Log</li>
                        </ul>
                    </div>
                    <div class="scroll-animate flex justify-center">
                        <img src="images/dashboard.jpg" alt="Dashboard Screenshot" class="rounded-lg shadow-xl border border-border max-h-[500px] w-auto">
                    </div>
                </div>

                <div class="grid lg:grid-cols-2 gap-12 items-center mb-20">
                    <div class="scroll-animate lg:order-2">
                        <h3 class="text-3xl font-bold text-text-primary mb-4">Effortless Event Management</h3>
                        <p class="text-text-secondary text-lg leading-relaxed mb-6">Organize and manage all your school events in one place. The Events Calendar allows you to create new events, assign duties to prefects, and track who is responsible for what, ensuring everything runs smoothly.</p>
                        <ul class="space-y-3">
                            <li class="flex items-center text-text-secondary"><i class="fa-solid fa-check-circle text-accent mr-3"></i>Create & Manage Events</li>
                            <li class="flex items-center text-text-secondary"><i class="fa-solid fa-check-circle text-accent mr-3"></i>Assign & Track Duties</li>
                            <li class="flex items-center text-text-secondary"><i class="fa-solid fa-check-circle text-accent mr-3"></i>Clear Calendar View</li>
                        </ul>
                    </div>
                    <div class="scroll-animate lg:order-1 flex justify-center">
                        <img src="images/events.jpg" alt="Events Calendar Screenshot" class="rounded-lg shadow-xl border border-border max-h-[500px] w-auto">
                    </div>
                </div>

                <div class="grid lg:grid-cols-2 gap-12 items-center">
                    <div class="scroll-animate">
                        <h3 class="text-3xl font-bold text-text-primary mb-4">Instant Announcements</h3>
                        <p class="text-text-secondary text-lg leading-relaxed mb-6">Keep your entire prefects' guild informed with real-time announcements. The News Feed lets you post updates, notices, and important messages instantly, ensuring everyone stays on the same page.</p>
                        <ul class="space-y-3">
                            <li class="flex items-center text-text-secondary"><i class="fa-solid fa-check-circle text-accent mr-3"></i>Post Updates to the News Feed</li>
                            <li class="flex items-center text-text-secondary"><i class="fa-solid fa-check-circle text-accent mr-3"></i>Chronological Message Display</li>
                            <li class="flex items-center text-text-secondary"><i class="fa-solid fa-check-circle text-accent mr-3"></i>Centralized Communication</li>
                        </ul>
                    </div>
                    <div class="scroll-animate flex justify-center">
                        <img src="images/announcement.jpg" alt="Announcements Screenshot" class="rounded-lg shadow-xl border border-border max-h-[500px] w-auto">
                    </div>
                </div>
            </div>
        </section>

        <section id="how-it-works" class="py-24 bg-background">
            <div class="container mx-auto px-6 text-center">
                <p class="section-subtitle text-primary mb-2 scroll-animate">EASY AS 1-2-3</p>
                <h2 class="section-title text-4xl font-extrabold text-text-primary mb-16 mx-auto scroll-animate">How It Works</h2>

                <div class="relative">
                    <div class="hidden md:block absolute top-10 left-0 w-full h-0.5 bg-border"></div>
                    
                    <div class="grid md:grid-cols-3 gap-12 relative">
                        <div class="text-center scroll-animate" style="transition-delay: 100ms;">
                            <div class="relative mb-6">
                                <div class="w-20 h-20 bg-light-bg border-2 border-primary rounded-full flex items-center justify-center mb-4 shadow-lg mx-auto z-10 relative">
                                    <span class="text-3xl font-bold text-primary">1</span>
                                </div>
                            </div>
                            <h4 class="text-xl font-bold text-text-primary mb-3">Register & Setup</h4>
                            <p class="text-base text-text-secondary leading-relaxed">Request access and set up your administrative profile in minutes.</p>
                        </div>
                        <div class="text-center scroll-animate" style="transition-delay: 200ms;">
                            <div class="relative mb-6">
                                <div class="w-20 h-20 bg-light-bg border-2 border-primary rounded-full flex items-center justify-center mb-4 shadow-lg mx-auto z-10 relative">
                                    <span class="text-3xl font-bold text-primary">2</span>
                                </div>
                            </div>
                            <h4 class="text-xl font-bold text-text-primary mb-3">Manage & Monitor</h4>
                            <p class="text-base text-text-secondary leading-relaxed">Use the dashboard to manage duties, track attendance, and communicate.</p>
                        </div>
                        <div class="text-center scroll-animate" style="transition-delay: 300ms;">
                            <div class="relative mb-6">
                                <div class="w-20 h-20 bg-light-bg border-2 border-primary rounded-full flex items-center justify-center mb-4 shadow-lg mx-auto z-10 relative">
                                    <span class="text-3xl font-bold text-primary">3</span>
                                </div>
                            </div>
                            <h4 class="text-xl font-bold text-text-primary mb-3">Generate Reports</h4>
                            <p class="text-base text-text-secondary leading-relaxed">Instantly generate PDF reports for meetings, events, and records.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="dashboard-preview" class="py-24 bg-light-bg">
            <div class="container mx-auto px-6">
                <p class="section-subtitle text-primary mb-2 text-center scroll-animate">SEE IT IN ACTION</p>
                <h2 class="section-title text-4xl font-extrabold text-text-primary mb-12 text-center mx-auto scroll-animate">Admin Dashboard Preview</h2>
                
                <div class="grid lg:grid-cols-2 gap-8 items-center">
                    <div class="scroll-animate">
                        <img src="images/dashboard.jpg" alt="Dashboard Screenshot 1" class="rounded-lg shadow-xl w-full border border-border">
                    </div>
                    <div class="scroll-animate">
                        <h3 class="text-3xl font-bold text-text-primary mb-4">Powerful Analytics</h3>
                        <p class="text-text-secondary text-lg leading-relaxed mb-4">Track attendance, monitor event engagement, and gain valuable insights with our easy-to-use dashboard. All the data you need, beautifully visualized.</p>
                        <ul class="space-y-2">
                            <li class="flex items-center text-text-secondary"><i class="fa-solid fa-check-circle text-accent mr-3"></i>Real-time Statistics</li>
                            <li class="flex items-center text-text-secondary"><i class="fa-solid fa-check-circle text-accent mr-3"></i>Customizable Reports</li>
                            <li class="flex items-center text-text-secondary"><i class="fa-solid fa-check-circle text-accent mr-3"></i>User Management</li>
                        </ul>
                    </div>
                </div>

                <div class="grid lg:grid-cols-2 gap-8 items-center mt-16">
                    <div class="scroll-animate lg:order-2">
                        <img src="images/events.jpg" alt="Dashboard Screenshot 2" class="rounded-lg shadow-xl w-full border border-border">
                    </div>
                    <div class="scroll-animate lg:order-1">
                        <h3 class="text-3xl font-bold text-text-primary mb-4">Effortless Management</h3>
                        <p class="text-text-secondary text-lg leading-relaxed">Create events, assign duties, and manage prefect profiles with just a few clicks. Our intuitive interface makes complex tasks simple.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="testimonials" class="py-24 bg-background">
            <div class="container mx-auto px-6">
                <p class="section-subtitle text-primary mb-2 text-center scroll-animate">WORDS OF PRAISE</p>
                <h2 class="section-title text-4xl font-extrabold text-text-primary mb-16 text-center mx-auto scroll-animate">What Our Users Say</h2>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="p-8 rounded-xl feature-card bg-light-bg scroll-animate">
                        <div class="text-yellow-400 mb-4 text-2xl">
                            <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
                        </div>
                        <p class="text-text-secondary text-lg italic leading-relaxed mb-6">"This system has completely transformed how we manage our duties. It's fast, intuitive, and has saved us countless hours of administrative work. A must-have for any prefect guild."</p>
                        <div class="flex items-center">
                            <div class="w-12 h-12 rounded-full mr-4 border-2 border-primary bg-gray-200 flex items-center justify-center">
                               <span class="font-bold text-lg text-text-primary">JD</span></div>
                            <div>
                                <h4 class="font-bold text-text-primary">John Doe</h4>
                                <p class="text-sm text-text-secondary">Head Prefect 2024</p>
                            </div>
                        </div>
                    </div>
                    <div class="p-8 rounded-xl feature-card bg-light-bg scroll-animate" style="transition-delay: 100ms;">
                        <div class="text-yellow-400 mb-4 text-2xl">
                            <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star-half-alt"></i>
                        </div>
                        <p class="text-text-secondary text-lg italic leading-relaxed mb-6">"The ability to generate official letters and reports directly from the app is a game-changer. It has professionalized our operations and improved our communication with the school administration."</p>
                        <div class="flex items-center">
                            <div class="w-12 h-12 rounded-full mr-4 border-2 border-primary bg-gray-200 flex items-center justify-center">
                               <span class="font-bold text-lg text-text-primary">JS</span></div>
                            <div>
                                <h4 class="font-bold text-text-primary">Jane Smith</h4>
                                <p class="text-sm text-text-secondary">Secretary of the Guild</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="tech-stack" class="py-24 bg-light-bg">
            <div class="container mx-auto px-6">
                <div class="grid md:grid-cols-2 gap-16 items-center">
                    <div class="scroll-animate">
                        <p class="section-subtitle text-primary mb-2">ROBUST & RELIABLE</p>
                        <h2 class="text-4xl font-extrabold text-text-primary mb-6">Built with Modern Technology</h2>
                        <p class="text-text-secondary text-lg leading-relaxed mb-8">
                            Our application is built on a foundation of modern, secure, and scalable technologies to ensure a seamless and safe experience. We prioritize data integrity and user privacy.
                        </p>
                        <ul class="space-y-3">
                            <li class="flex items-start text-text-secondary"><i class="fa-solid fa-shield-alt text-accent mr-3 mt-1"></i><span><strong>End-to-End Encryption:</strong> All data transmitted between the app and our servers is fully encrypted.</span></li>
                            <li class="flex items-start text-text-secondary"><i class="fa-solid fa-user-lock text-accent mr-3 mt-1"></i><span><strong>Role-Based Access Control:</strong> Users can only access features and data relevant to their designated roles.</span></li>
                            <li class="flex items-start text-text-secondary"><i class="fa-solid fa-server text-accent mr-3 mt-1"></i><span><strong>Secure Cloud Infrastructure:</strong> Hosted on a secure and reliable cloud platform with regular backups.</span></li>
                        </ul>
                    </div>
                    <div class="scroll-animate">
                        <div class="grid grid-cols-3 gap-8 text-center">
                            <div class="p-4 rounded-lg feature-card items-center justify-center flex flex-col">
                                <svg class="h-16 w-16 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg>
                                <p class="font-semibold mt-2 text-text-primary">Flutter</p>
                            </div>
                             <div class="p-4 rounded-lg feature-card items-center justify-center flex flex-col">
                                <svg class="h-16 w-16 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                                <p class="font-semibold mt-2 text-text-primary">Firebase</p>
                            </div>
                             <div class="p-4 rounded-lg feature-card items-center justify-center flex flex-col">
                                 <svg class="h-16 w-16 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2h1a2 2 0 002-2v-1a2 2 0 012-2h1.945M7.653 16.347A4.002 4.002 0 014 15V8a4 4 0 014-4h8a4 4 0 014 4v7a4.002 4.002 0 01-3.653 3.347M12 21v-4"></path></svg>
                                <p class="font-semibold mt-2 text-text-primary">Google Cloud</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="download" class="py-24 bg-background text-center">
            <div class="container mx-auto px-6 max-w-3xl scroll-animate">
                <p class="section-subtitle text-primary mb-2">GET THE APP</p>
                <h2 class="section-title text-4xl font-extrabold text-text-primary mb-6 mx-auto">Get Started in Seconds</h2>
                
                <p class="text-text-secondary text-lg leading-relaxed mb-10">
                    Download the official APK file directly to your Android device to begin.
                </p>

                <div class="scroll-animate">
                    <button onclick="openDownloadModal()" class="inline-flex items-center bg-primary text-white font-bold py-4 px-10 rounded-xl shadow-2xl text-lg mt-4 transition duration-300 transform hover:scale-105 btn-hover-effect hover:bg-primary-dark cursor-pointer">
                        <i class="fa-brands fa-android mr-3 text-xl"></i>
                        Download for Android
                    </button>
                </div>
                
                <p class="text-sm text-text-secondary mt-6">For Prefects' Guild Administration Use Only.</p>
            </div>
        </section>

        <section id="faq" class="py-24 bg-light-bg">
            <div class="container mx-auto px-6 max-w-4xl">
                <p class="section-subtitle text-primary mb-2 text-center scroll-animate">GOT QUESTIONS?</p>
                <h2 class="section-title text-4xl font-extrabold text-text-primary mb-16 text-center mx-auto scroll-animate">Frequently Asked Questions</h2>
                
                <div class="space-y-4">
                    <div class="rounded-lg border border-border faq-item scroll-animate">
                        <button class="w-full text-left p-6 flex justify-between items-center faq-question">
                            <span class="text-lg font-semibold text-text-primary">Is this application free to use?</span>
                            <i class="fa-solid fa-chevron-down transition-transform text-text-secondary"></i>
                        </button>
                        <div class="faq-answer hidden p-6 pt-0">
                            <p class="text-text-secondary">Yes, the ECCPMS application is completely free for all members of the Eheliyagoda Central College Prefects' Guild.</p>
                        </div>
                    </div>
                    <div class="rounded-lg border border-border faq-item scroll-animate" style="transition-delay: 100ms;">
                        <button class="w-full text-left p-6 flex justify-between items-center faq-question">
                            <span class="text-lg font-semibold text-text-primary">How do I get an admin account?</span>
                            <i class="fa-solid fa-chevron-down transition-transform text-text-secondary"></i>
                        </button>
                        <div class="faq-answer hidden p-6 pt-0">
                            <p class="text-text-secondary">You can request an admin account by filling out the registration form below. The dev team or Head Prefect will approve your request.</p>
                        </div>
                    </div>
                    <div class="rounded-lg border border-border faq-item scroll-animate" style="transition-delay: 200ms;">
                        <button class="w-full text-left p-6 flex justify-between items-center faq-question">
                            <span class="text-lg font-semibold text-text-primary">What devices are supported?</span>
                            <i class="fa-solid fa-chevron-down transition-transform text-text-secondary"></i>
                        </button>
                        <div class="faq-answer hidden p-6 pt-0">
                            <p class="text-text-secondary">Currently, the admin application is available for Android devices.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="team" class="py-24 bg-background">
            <div class="container mx-auto px-6 text-center max-w-6xl">
                <div class="scroll-animate">
                    <p class="section-subtitle text-primary mb-2">THE MINDS BEHIND IT</p>
                    <h2 class="section-title text-4xl font-extrabold text-text-primary mb-12 mx-auto">Meet the ECCPMS Dev Team</h2>
                </div>

                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-x-6 gap-y-10">
                    <div class="text-center scroll-animate group">
                        <div class="relative overflow-hidden rounded-lg shadow-lg">
                            <img src="images/Hansaka.png" alt="Hansaka Fernando" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                        </div>
                        <div class="mt-4">
                            <h4 class="text-lg font-bold text-text-primary">Hansaka Fernando</h4>
                            <p class="text-sm text-primary font-semibold">Website and Mobile App Developer</p>
                        </div>
                    </div>
                    <div class="text-center scroll-animate group" style="transition-delay: 50ms;">
                        <div class="relative overflow-hidden rounded-lg shadow-lg">
                            <img src="images/Adeesha.jpg" alt="Adeesha Ravimal" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                        </div>
                        <div class="mt-4">
                            <h4 class="text-lg font-bold text-text-primary">Adeesha Ravimal</h4>
                            <p class="text-sm text-primary font-semibold">Backend Architect</p>
                        </div>
                    </div>
                    <div class="text-center scroll-animate group" style="transition-delay: 100ms;">
                        <div class="relative overflow-hidden rounded-lg shadow-lg">
                            <img src="images/thevindu.JPG" alt="Thevindu Thisev" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                        </div>
                        <div class="mt-4">
                            <h4 class="text-lg font-bold text-text-primary">Thevindu Thisev</h4>
                            <p class="text-sm text-primary font-semibold">Data Collector</p>
                        </div>
                    </div>
                    <div class="text-center scroll-animate group" style="transition-delay: 150ms;">
                        <div class="relative overflow-hidden rounded-lg shadow-lg">
                            <img src="images/Avishka.jpg" alt="Avishka Kalhara" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                        </div>
                        <div class="mt-4">
                            <h4 class="text-lg font-bold text-text-primary">Avishka Kalhara</h4>
                            <p class="text-sm text-primary font-semibold">Aerial Media</p>
                        </div>
                    </div>
                    <div class="text-center scroll-animate group" style="transition-delay: 200ms;">
                        <div class="relative overflow-hidden rounded-lg shadow-lg">
                            <img src="images/Nethmi.jpg" alt="Nethmi Dhananjana" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                        </div>
                        <div class="mt-4">
                            <h4 class="text-lg font-bold text-text-primary">Nethmi Dhananjana</h4>
                            <p class="text-sm text-primary font-semibold">Data Coordinator</p>
                        </div>
                    </div>
                    <div class="text-center scroll-animate group" style="transition-delay: 250ms;">
                        <div class="relative overflow-hidden rounded-lg shadow-lg">
                            <img src="images/Rashmi.jpg" alt="Rashmi Jananjana" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                        </div>
                        <div class="mt-4">
                            <h4 class="text-lg font-bold text-text-primary">Rashmi Jananjana</h4>
                            <p class="text-sm text-primary font-semibold">Management Lead</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="register" class="py-24 bg-light-bg">
            <div class="container mx-auto px-6 flex flex-col items-center justify-center text-center">
                <div class="scroll-animate visible">
                    <p class="section-subtitle text-primary mb-2">GET STARTED</p>
                    <h2 class="section-title text-4xl font-extrabold mb-6 mx-auto text-text-primary">Request Admin Access</h2>
                    <p class="text-text-secondary text-lg leading-relaxed max-w-2xl mb-12">
                        Create your account below. Your access will be pending until approved by the Main Administrator.
                    </p>
                </div>
                 
                <div class="w-full max-w-lg p-8 rounded-xl bg-background shadow-2xl scroll-animate visible border border-border">
                    <form id="registrationForm">
                        
                        <div class="mb-5">
                            <label for="admissionNo" class="block text-left text-sm font-semibold text-text-secondary mb-2">Admission Number</label>
                            <input type="text" id="admissionNo" name="admissionNo" required 
                                   class="w-full px-4 py-3 border-2 border-border rounded-lg bg-light-bg text-text-primary focus:outline-none focus:border-primary transition shadow-sm placeholder-gray-400"
                                   placeholder="e.g. 12345">
                        </div>

                        <div class="mb-5">
                            <label for="fullName" class="block text-left text-sm font-semibold text-text-secondary mb-2">Full Name</label>
                            <input type="text" id="fullName" name="fullName" required 
                                   class="w-full px-4 py-3 border-2 border-border rounded-lg bg-light-bg text-text-primary focus:outline-none focus:border-primary transition shadow-sm placeholder-gray-400">
                        </div>

                        <div class="mb-5">
                            <label for="prefectRole" class="block text-left text-sm font-semibold text-text-secondary mb-2">Role / Designation</label>
                            <input type="text" id="prefectRole" name="prefectRole" required 
                                   class="w-full px-4 py-3 border-2 border-border rounded-lg bg-light-bg text-text-primary focus:outline-none focus:border-primary transition shadow-sm placeholder-gray-400"
                                   placeholder="e.g. Head Prefect">
                        </div>

                        <div class="mb-5">
                            <label for="studyStream" class="block text-left text-sm font-semibold text-text-secondary mb-2">A/L Stream</label>
                            <div class="relative">
                                <select id="studyStream" name="studyStream" required 
                                        class="w-full px-4 py-3 border-2 border-border rounded-lg bg-light-bg text-text-primary focus:outline-none focus:border-primary transition shadow-sm appearance-none cursor-pointer">
                                    <option value="" disabled selected class="text-gray-700">Select Stream</option>
                                    <option value="Physical Science">Physical Science (Maths)</option>
                                    <option value="Bio Science">Bio Science</option>
                                    <option value="Commerce">Commerce</option>
                                    <option value="Arts">Arts</option>
                                    <option value="Technology">Technology</option>
                                    <option value="Other">Other</option>
                                </select>
                                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-text-primary">
                                    <i class="fa-solid fa-chevron-down text-sm mr-2"></i>
                                </div>
                            </div>
                        </div>

                        <div class="mb-5">
                            <label for="whatsappNo" class="block text-left text-sm font-semibold text-text-secondary mb-2">WhatsApp Number</label>
                            <input type="tel" id="whatsappNo" name="whatsappNo" required 
                                   class="w-full px-4 py-3 border-2 border-border rounded-lg bg-light-bg text-text-primary focus:outline-none focus:border-primary transition shadow-sm placeholder-gray-400"
                                   placeholder="07xxxxxxxx">
                        </div>

                        <div class="mb-5">
                            <label for="email" class="block text-left text-sm font-semibold text-text-secondary mb-2">Email Address</label>
                            <input type="email" id="email" name="email" required 
                                   class="w-full px-4 py-3 border-2 border-border rounded-lg bg-light-bg text-text-primary focus:outline-none focus:border-primary transition shadow-sm placeholder-gray-400">
                        </div>
                        
                        <div class="mb-5">
                            <label for="password" class="block text-left text-sm font-semibold text-text-secondary mb-2">Password</label>
                            <div class="relative">
                                <input type="password" id="password" name="password" required
                                       class="w-full px-4 py-3 border-2 border-border rounded-lg bg-light-bg text-text-primary focus:outline-none focus:border-primary transition shadow-sm pr-10 placeholder-gray-400"
                                       placeholder="Create password">
                                <button type="button" id="togglePassword" class="absolute inset-y-0 right-0 px-3 text-gray-400 hover:text-text-primary focus:outline-none">
                                    <i class="fa-regular fa-eye" id="eyeIcon"></i>
                                </button>
                            </div>
                            
                            <div class="mt-3 grid grid-cols-1 gap-1 text-left">
                                <div id="req-length" class="text-xs text-text-secondary flex items-center transition-colors duration-300">
                                    <i class="fa-regular fa-circle mr-2 text-[10px]"></i> At least 8 characters
                                </div>
                                <div id="req-num" class="text-xs text-text-secondary flex items-center transition-colors duration-300">
                                    <i class="fa-regular fa-circle mr-2 text-[10px]"></i> Contains a number (0-9)
                                </div>
                                <div id="req-cap" class="text-xs text-text-secondary flex items-center transition-colors duration-300">
                                    <i class="fa-regular fa-circle mr-2 text-[10px]"></i> Contains uppercase letter (A-Z)
                                </div>
                            </div>

                            <div class="w-full h-1 bg-gray-200 rounded-full mt-3 overflow-hidden">
                                <div id="strengthBar" class="h-full bg-red-500 w-0 transition-all duration-500 ease-out"></div>
                            </div>
                        </div>

                        <div class="mb-5">
                            <label for="confirmPassword" class="block text-left text-sm font-semibold text-text-secondary mb-2">Confirm Password</label>
                            <input type="password" id="confirmPassword" name="confirmPassword" required
                                   class="w-full px-4 py-3 border-2 border-border rounded-lg bg-light-bg text-text-primary focus:outline-none focus:border-primary transition shadow-sm placeholder-gray-400"
                                   placeholder="Retype password">
                            <p id="matchMessage" class="text-xs mt-1 h-4 text-left"></p>
                        </div>

                        <div class="mb-6 flex items-start">
                            <div class="flex items-center h-5">
                                <input id="terms" name="terms" type="checkbox" required 
                                       class="w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-primary ring-offset-background">
                            </div>
                            <label for="terms" class="ml-2 text-sm font-medium text-text-secondary">
                                I agree to the <a href="#" class="text-primary hover:underline">Guild Regulations</a>.
                            </label>
                        </div>
                        
                        <div id="messageContainer" class="hidden mb-4 p-3 rounded-lg text-sm font-bold text-left">
                            <p id="messageText"></p>
                        </div>

                        <button type="submit" id="submitButton" class="text-white bg-primary font-bold py-3 px-6 rounded-xl w-full shadow-lg text-lg flex items-center justify-center btn-hover-effect hover:bg-primary-dark disabled:opacity-50 disabled:cursor-not-allowed">
                            <svg id="spinner" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            <span id="buttonText">Register Admin Account</span>
                        </button>
                    </form>
                </div>
            </div>
        </section>

    </main>

    <footer class="text-center py-10 text-sm bg-background border-t border-border">
        <div class="container mx-auto px-6">
            <div class="flex justify-center space-x-6 mb-5">
                <a href="https://www.facebook.com/profile.php?id=61552015108523" target="_blank" class="social-icon text-text-secondary text-2xl" aria-label="Facebook"><i class="fa-brands fa-facebook-f"></i></a>
                <a href="tel:+94779912589" class="social-icon text-text-secondary text-2xl" aria-label="Phone"><i class="fa-solid fa-phone"></i></a>
                <a href="mailto:emmvprefects@gmail.com" class="social-icon text-text-secondary text-2xl" aria-label="Email"><i class="fa-solid fa-envelope"></i></a>
            </div>
            <p class="mb-2 text-base text-text-secondary">Developed with ❤️ by the <span class="font-bold text-text-primary">E.C.C. Prefects' Guild Dev Team</span></p>
            <p class="mt-4 text-text-secondary">&copy; 2025 Eheliyagoda Central College. All Rights Reserved.</p>
        </div>
    </footer>

    <div id="otpModal" class="fixed inset-0 z-[100] hidden overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity blur-sm"></div>

        <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
            <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg border-2 border-[#800000]">
                
                <div class="absolute top-0 right-0 pt-4 pr-4">
                    <button type="button" onclick="closeDownloadModal()" class="text-gray-400 hover:text-gray-500">
                        <span class="sr-only">Close</span>
                        <i class="fa-solid fa-xmark text-2xl"></i>
                    </button>
                </div>

                <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
                    <div class="sm:flex sm:items-start">
                        <div class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10">
                            <i class="fa-solid fa-lock text-[#800000]"></i>
                        </div>
                        <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full">
                            <h3 class="text-xl font-bold leading-6 text-gray-900" id="modal-title">Security Verification</h3>
                            <div class="mt-2">
                                <p class="text-sm text-gray-500">Please enter your email address to receive a One-Time Password (OTP) to download the app.</p>
                                
                                <div id="emailStep" class="mt-4">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                                    <input type="email" id="downloadEmail" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#800000] focus:border-[#800000]" placeholder="Enter your email">
                                    <p id="emailError" class="text-red-500 text-xs mt-1 hidden"></p>
                                </div>

                                <div id="otpStep" class="mt-4 hidden">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Enter OTP Code</label>
                                    <input type="text" id="otpInput" maxlength="6" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#800000] focus:border-[#800000] tracking-widest text-center text-xl" placeholder="XXXXXX">
                                    <p class="text-xs text-gray-500 mt-2">OTP sent to <span id="displayEmail" class="font-bold"></span></p>
                                    <p id="otpError" class="text-red-500 text-xs mt-1 hidden">Incorrect OTP</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
                    <button type="button" id="sendOtpBtn" onclick="sendOTP()" class="inline-flex w-full justify-center rounded-md bg-[#800000] px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-[#660000] sm:ml-3 sm:w-auto transition-colors">
                        Send OTP
                    </button>
                    <button type="button" id="verifyOtpBtn" onclick="verifyOTP()" class="hidden inline-flex w-full justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-700 sm:ml-3 sm:w-auto transition-colors">
                        Verify & Download
                    </button>
                    <button type="button" onclick="closeDownloadModal()" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    
    <script>
        // Preloader
        window.addEventListener('load', () => {
            const preloader = document.getElementById('preloader');
            preloader.style.transition = 'opacity 0.5s ease-out, visibility 0.5s ease-out';
            preloader.classList.add('opacity-0', 'invisible');
            setTimeout(() => {
                preloader.style.display = 'none';
            }, 500);
        });

        // Scroll Animation
        const animatedElements = document.querySelectorAll('.scroll-animate');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });

        animatedElements.forEach(el => {
            observer.observe(el);
        });

        // FAQ Accordion
        const faqItems = document.querySelectorAll('.faq-item');
        faqItems.forEach(item => {
            const question = item.querySelector('.faq-question');
            const answer = item.querySelector('.faq-answer');

            question.addEventListener('click', () => {
                const isVisible = !answer.classList.contains('hidden');
                
                // Close all other answers
                document.querySelectorAll('.faq-answer').forEach(ans => {
                    if (ans !== answer) {
                        ans.classList.add('hidden');
                        ans.closest('.faq-item').querySelector('.faq-question').classList.remove('active');
                    }
                });

                // Toggle current answer
                answer.classList.toggle('hidden');
                question.classList.toggle('active');
            });
        });

        // Smooth Scrolling Logic
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetElement = document.querySelector(this.getAttribute('href'));
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Mobile Nav Toggle
        const navOverlay = document.getElementById('nav-mobile-overlay');
        const navMobile = document.getElementById('nav-mobile');
        const navTrigger = document.getElementById('nav-trigger');
        const navClose = document.getElementById('nav-close');
        const navLinks = navMobile.querySelectorAll('a');

        function openNav() {
            navOverlay.classList.remove('hidden');
            setTimeout(() => {
                navOverlay.classList.add('is-open');
                navMobile.classList.remove('-translate-y-full'); // Remove for sliding down
            }, 10);
        }

        function closeNav() {
            navOverlay.classList.remove('is-open');
            navMobile.classList.add('-translate-y-full'); // Add for sliding up
            setTimeout(() => {
                navOverlay.classList.add('hidden');
            }, 400); // Should match navMobile transition duration
        }

        navTrigger.addEventListener('click', openNav);
        navClose.addEventListener('click', closeNav);
        navOverlay.addEventListener('click', (e) => {
            if (e.target === navOverlay) {
                closeNav();
            }
        });
        navLinks.forEach(link => {
            link.addEventListener('click', closeNav);
        });

        // --- NEW CODE: OTP & DOWNLOAD LOGIC ---
        
        const apkUrl = "https://github.com/Hansaka-Franando-589/ECCPMS/releases/download/v1/ECCPMS.By.Dev.Team.v3.18.apk";
        let generatedOTP = null;

        // Modal Functions
        function openDownloadModal() {
            document.getElementById('otpModal').classList.remove('hidden');
            resetModal();
        }

        function closeDownloadModal() {
            document.getElementById('otpModal').classList.add('hidden');
        }

        function resetModal() {
            document.getElementById('emailStep').classList.remove('hidden');
            document.getElementById('otpStep').classList.add('hidden');
            document.getElementById('sendOtpBtn').classList.remove('hidden');
            document.getElementById('verifyOtpBtn').classList.add('hidden');
            document.getElementById('downloadEmail').value = '';
            document.getElementById('otpInput').value = '';
            document.getElementById('emailError').classList.add('hidden');
            document.getElementById('otpError').classList.add('hidden');
            document.getElementById('sendOtpBtn').innerHTML = 'Send OTP';
            document.getElementById('sendOtpBtn').disabled = false;
        }

        // Generate Random 6 Digit Number
        function generateOTP() {
            return Math.floor(100000 + Math.random() * 900000).toString();
        }

        // Send OTP via EmailJS
        function sendOTP() {
            const email = document.getElementById('downloadEmail').value;
            const btn = document.getElementById('sendOtpBtn');
            const errorMsg = document.getElementById('emailError');

            // Simple validation
            if (!email || !email.includes('@')) {
                errorMsg.textContent = "Please enter a valid email address";
                errorMsg.classList.remove('hidden');
                return;
            }

            btn.disabled = true;
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin mr-2"></i>Sending...';
            
            generatedOTP = generateOTP();

            // EmailJS Parameters
            const templateParams = {
                to_email: email,
                otp_code: generatedOTP
            };

            // ⚠️ අවධානයයි: මෙතැන ඔබේ Service ID සහ Template ID දමන්න
            // උදා: emailjs.send('service_xyz', 'template_abc', templateParams)
            emailjs.send('service_cwl7hxc', 'template_caw4ksi', templateParams)
                .then(function(response) {
                    console.log('SUCCESS!', response.status, response.text);
                    // Switch to OTP Input View
                    document.getElementById('emailStep').classList.add('hidden');
                    document.getElementById('otpStep').classList.remove('hidden');
                    document.getElementById('displayEmail').innerText = email;
                    
                    // Switch Buttons
                    document.getElementById('sendOtpBtn').classList.add('hidden');
                    document.getElementById('verifyOtpBtn').classList.remove('hidden');
                }, function(error) {
                    console.log('FAILED...', error);
                    errorMsg.textContent = "Failed to send email. Check console/keys.";
                    errorMsg.classList.remove('hidden');
                    btn.disabled = false;
                    btn.innerHTML = 'Send OTP';
                });
        }

        // Verify OTP
        function verifyOTP() {
            const userOTP = document.getElementById('otpInput').value;
            const errorMsg = document.getElementById('otpError');

            if (userOTP === generatedOTP) {
                // Success! Start Download
                const link = document.createElement('a');
                link.href = apkUrl;
                link.setAttribute('download', 'ECCPMS_Admin_App.apk'); 
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                closeDownloadModal();
                // Optional success message
                // alert("Verification Successful! Download starting...");
            } else {
                errorMsg.classList.remove('hidden');
            }
        }
    </script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, updateProfile } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // Firebase Configuration
        const firebaseConfig = {
          apiKey: "AIzaSyCEvF1sD56pmtYlbno4QAY_Kr5xeFrTAvU",
          authDomain: "prefect-management-syste-e1575.firebaseapp.com",
          projectId: "prefect-management-syste-e1575",
          storageBucket: "prefect-management-syste-e1575.firebasestorage.app",
          messagingSenderId: "973932803095",
          appId: "1:973932803095:web:a7f2db386cafb53330d852",
          measurementId: "G-FLF7R3B8J3"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // --- Elements ---
        const form = document.getElementById('registrationForm');
        const passwordInput = document.getElementById('password');
        const confirmPasswordInput = document.getElementById('confirmPassword');
        const togglePasswordBtn = document.getElementById('togglePassword');
        const eyeIcon = document.getElementById('eyeIcon');
        const strengthBar = document.getElementById('strengthBar');
        const matchMessage = document.getElementById('matchMessage');
        
        const messageContainer = document.getElementById('messageContainer');
        const messageText = document.getElementById('messageText');

        const reqLength = document.getElementById('req-length');
        const reqNum = document.getElementById('req-num');
        const reqCap = document.getElementById('req-cap');

        function updateRequirement(element, isValid) {
            const icon = element.querySelector('i');
            if (isValid) {
                element.classList.remove('text-text-secondary');
                element.classList.add('text-green-400');
                icon.classList.remove('fa-circle', 'fa-regular');
                icon.classList.add('fa-circle-check', 'fa-solid');
            } else {
                element.classList.remove('text-green-400');
                element.classList.add('text-text-secondary');
                icon.classList.remove('fa-circle-check', 'fa-solid');
                icon.classList.add('fa-circle', 'fa-regular');
            }
        }

        function showMessage(msg, type) {
            messageContainer.classList.remove('hidden');
            messageText.innerHTML = msg;
            
            messageContainer.className = "mb-4 p-4 rounded-lg text-sm font-bold text-left animate__animated";
            if(type === 'error') {
                messageContainer.classList.add('bg-red-100', 'border', 'border-red-400', 'text-red-700', 'animate__shakeX');
            } else {
                messageContainer.classList.add('bg-green-100', 'border', 'border-green-400', 'text-green-700', 'animate__fadeIn');
            }
        }

        togglePasswordBtn.addEventListener('click', () => {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            
            eyeIcon.classList.toggle('fa-eye');
            eyeIcon.classList.toggle('fa-eye-slash');
        });

        passwordInput.addEventListener('input', () => {
            const val = passwordInput.value;
            let strength = 0;

            const hasLength = val.length >= 8;
            const hasNum = /\d/.test(val);
            const hasCap = /[A-Z]/.test(val);

            updateRequirement(reqLength, hasLength);
            updateRequirement(reqNum, hasNum);
            updateRequirement(reqCap, hasCap);

            if (hasLength) strength += 40;
            if (hasNum) strength += 30;
            if (hasCap) strength += 30;

            let color = 'bg-red-500';
            if (strength >= 100) color = 'bg-green-500';
            else if (strength >= 40) color = 'bg-yellow-500';

            strengthBar.className = `h-full ${color} transition-all duration-500 ease-out`;
            strengthBar.style.width = `${strength}%`;
        });

        confirmPasswordInput.addEventListener('input', () => {
            if (confirmPasswordInput.value === passwordInput.value && passwordInput.value !== "") {
                matchMessage.textContent = "Passwords Match ✅";
                matchMessage.className = "text-xs mt-1 text-green-400 font-bold";
            } else {
                matchMessage.textContent = "Passwords do not match";
                matchMessage.className = "text-xs mt-1 text-red-400 font-bold";
            }
        });

        form.addEventListener('submit', async (event) => {
            event.preventDefault();
            
            const button = document.getElementById('submitButton');
            const buttonText = document.getElementById('buttonText');
            const spinner = document.getElementById('spinner');

            messageContainer.classList.add('hidden');

            if (passwordInput.value !== confirmPasswordInput.value) {
                showMessage("⚠️ Passwords do not match!", "error");
                return;
            }

            const val = passwordInput.value;
            if (val.length < 8 || !/\d/.test(val) || !/[A-Z]/.test(val)) {
                 showMessage("⚠️ Password does not meet all requirements.", "error");
                 return;
            }

            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());

            button.disabled = true;
            spinner.classList.remove('hidden');
            buttonText.textContent = 'Processing...';

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, data.email, data.password);
                const user = userCredential.user;

                await updateProfile(user, { displayName: data.fullName });

                await setDoc(doc(db, "app_admins", user.uid), {
                    uid: user.uid,
                    admissionNo: data.admissionNo,
                    fullName: data.fullName,
                    role: data.prefectRole,
                    stream: data.studyStream,
                    whatsapp: data.whatsappNo,
                    email: data.email,
                    password: data.password, 
                    status: "pending",
                    createdAt: new Date().toISOString()
                });

                showMessage("✅ Account Created! Please wait for Admin approval.", "success");
                form.reset();
                
                strengthBar.style.width = '0%';
                matchMessage.textContent = '';
                updateRequirement(reqLength, false);
                updateRequirement(reqNum, false);
                updateRequirement(reqCap, false);

            } catch (error) {
                console.error('Registration Error:', error);
                let errorMessage = "An unknown error occurred.";
                if (error.code === 'auth/email-already-in-use') {
                    errorMessage = "This email is already registered.";
                } else if (error.message) {
                    errorMessage = error.message;
                }
                
                showMessage(`❌ Error: ${errorMessage}`, "error");
            } finally {
                button.disabled = false;
                spinner.classList.add('hidden');
                buttonText.textContent = 'Register Admin Account';
            }
        });
    </script>

</body>
</html>
